{"ast":null,"code":"var _jsxFileName = \"/Users/maxym/Udemy&other/coin-data/client/src/CoinData/CoinData.js\",\n    _s = $RefreshSig$();\n\nimport './CoinData.css';\nimport Dropdown from 'react-dropdown';\nimport 'react-dropdown/style.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Button } from 'react-bootstrap';\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Highcharts from 'highcharts';\nimport HighchartsReact from 'highcharts-react-official';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Loader from \"react-loader-spinner\";\nimport useWebSocket from 'react-use-websocket';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CoinData = () => {\n  _s();\n\n  const [data, setData] = useState([]);\n  const [histPrice, setHistPrice] = useState([]);\n  const [currentCoin, setCurrentCoin] = useState();\n  const [isLoaded, setIsLoaded] = useState(false);\n  const {\n    sendMessage,\n    lastMessage\n  } = useWebSocket('ws://ws.coinapi.io/v1/');\n  useEffect(() => {\n    axios.get('http://localhost:3008/getAssetId').then(response => {\n      setData(response.data);\n    });\n    sendMessage(JSON.stringify({\n      \"type\": \"hello\",\n      \"apikey\": \"66A15D21-5AB9-41C5-ABA2-43E246120E31\",\n      \"heartbeat\": true,\n      \"subscribe_data_type\": [\"trade\"],\n      \"subscribe_filter_symbol_id\": [\"BITSTAMP_SPOT_BTC_USD$\", \"BITFINEX_SPOT_BTCLTC$\", \"COINBASE\", \"ITBIT_\"]\n    }));\n  }, []);\n  useEffect(() => {\n    console.log(lastMessage);\n  }, [lastMessage]);\n  let filteredHistData = histPrice.map(el => [+new Date(el.time_open), Math.round(el.rate_open)]);\n  const options = {\n    chart: {\n      zoomType: 'x'\n    },\n    title: {\n      text: `${currentCoin} to USD exchange rate over time`\n    },\n    subtitle: {\n      text: document.ontouchstart === undefined ? 'Click and drag in the plot area to zoom in' : 'Pinch the chart to zoom in'\n    },\n    xAxis: {\n      type: 'datetime'\n    },\n    yAxis: {\n      title: {\n        text: 'Price (USD)'\n      }\n    },\n    legend: {\n      enabled: false\n    },\n    plotOptions: {\n      area: {\n        fillColor: {\n          linearGradient: {\n            x1: 0,\n            y1: 0,\n            x2: 0,\n            y2: 1\n          },\n          stops: [[0, Highcharts.getOptions().colors[0]], [1, Highcharts.color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]]\n        },\n        marker: {\n          radius: 2\n        },\n        lineWidth: 1,\n        states: {\n          hover: {\n            lineWidth: 1\n          }\n        },\n        threshold: null\n      }\n    },\n    series: [{\n      type: 'area',\n      name: 'Price (USD)',\n      data: filteredHistData\n    }]\n  };\n\n  const onSubscribeBtn = () => {\n    axios.get(`http://localhost:3008/historicalPrice?coin=${currentCoin}`).then(response => {\n      setHistPrice(response.data);\n      console.log(histPrice.length);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"select-coin\",\n      children: [/*#__PURE__*/_jsxDEV(Dropdown, {\n        className: \"dropdown\",\n        onChange: e => {\n          setCurrentCoin(e.value);\n        },\n        options: data.map(el => el.asset_id),\n        placeholder: \"Select an option\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: \"subscribe-btn\",\n        onClick: onSubscribeBtn,\n        variant: \"primary\",\n        children: \"Subscribe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this), ' ']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Market data\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"market-data\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        width: \"100%\",\n        cellPadding: \"5\",\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Symbol:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Price:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Time:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: \"BTC/USD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: \"$48.384,433\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: \"Aug 7, 9:45 AM\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"charting-data\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Charting data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }, this), isLoaded === false ? /*#__PURE__*/_jsxDEV(Loader, {\n        type: \"TailSpin\",\n        color: \"#0080ff\",\n        height: 80,\n        width: 80\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(HighchartsReact, {\n        highcharts: Highcharts,\n        options: options\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CoinData, \"tmH1E1pjY9jUwZALIRNYB8lDRtU=\", false, function () {\n  return [useWebSocket];\n});\n\n_c = CoinData;\nexport default CoinData;\n\nvar _c;\n\n$RefreshReg$(_c, \"CoinData\");","map":{"version":3,"sources":["/Users/maxym/Udemy&other/coin-data/client/src/CoinData/CoinData.js"],"names":["Dropdown","Button","useEffect","useState","axios","Highcharts","HighchartsReact","Loader","useWebSocket","CoinData","data","setData","histPrice","setHistPrice","currentCoin","setCurrentCoin","isLoaded","setIsLoaded","sendMessage","lastMessage","get","then","response","JSON","stringify","console","log","filteredHistData","map","el","Date","time_open","Math","round","rate_open","options","chart","zoomType","title","text","subtitle","document","ontouchstart","undefined","xAxis","type","yAxis","legend","enabled","plotOptions","area","fillColor","linearGradient","x1","y1","x2","y2","stops","getOptions","colors","color","setOpacity","marker","radius","lineWidth","states","hover","threshold","series","name","onSubscribeBtn","length","e","value","asset_id"],"mappings":";;;AAAA,OAAO,gBAAP;AACA,OAAOA,QAAP,MAAqB,gBAArB;AACA,OAAO,0BAAP;AACA,OAAO,sCAAP;AACA,SAAQC,MAAR,QAAqB,iBAArB;AACA,SAAQC,SAAR,EAAmBC,QAAnB,QAAkC,OAAlC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,eAAP,MAA4B,2BAA5B;AACA,OAAO,+DAAP;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,YAAP,MAAyB,qBAAzB;;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AAAA;;AACnB,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACS,SAAD,EAAYC,YAAZ,IAA4BV,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACW,WAAD,EAAcC,cAAd,IAAgCZ,QAAQ,EAA9C;AACA,QAAM,CAACa,QAAD,EAAWC,WAAX,IAA0Bd,QAAQ,CAAC,KAAD,CAAxC;AAEA,QAAM;AACFe,IAAAA,WADE;AAEFC,IAAAA;AAFE,MAGFX,YAAY,CAAC,wBAAD,CAHhB;AAMAN,EAAAA,SAAS,CAAC,MAAM;AACZE,IAAAA,KAAK,CAACgB,GAAN,CAAU,kCAAV,EACKC,IADL,CACWC,QAAD,IAAc;AAChBX,MAAAA,OAAO,CAACW,QAAQ,CAACZ,IAAV,CAAP;AACH,KAHL;AAIAQ,IAAAA,WAAW,CAACK,IAAI,CAACC,SAAL,CAAe;AACvB,cAAQ,OADe;AAEvB,gBAAU,sCAFa;AAGvB,mBAAa,IAHU;AAIvB,6BAAuB,CAAC,OAAD,CAJA;AAKvB,oCAA8B,CAC1B,wBAD0B,EAE1B,uBAF0B,EAG1B,UAH0B,EAI1B,QAJ0B;AALP,KAAf,CAAD,CAAX;AAYH,GAjBQ,EAiBN,EAjBM,CAAT;AAmBAtB,EAAAA,SAAS,CAAC,MAAM;AACJuB,IAAAA,OAAO,CAACC,GAAR,CAAYP,WAAZ;AACX,GAFQ,EAEN,CAACA,WAAD,CAFM,CAAT;AAIA,MAAIQ,gBAAgB,GAAGf,SAAS,CAACgB,GAAV,CAAeC,EAAD,IAAQ,CAAC,CAAC,IAAIC,IAAJ,CAASD,EAAE,CAACE,SAAZ,CAAF,EAA0BC,IAAI,CAACC,KAAL,CAAWJ,EAAE,CAACK,SAAd,CAA1B,CAAtB,CAAvB;AAEA,QAAMC,OAAO,GAAG;AACZC,IAAAA,KAAK,EAAE;AACHC,MAAAA,QAAQ,EAAE;AADP,KADK;AAIZC,IAAAA,KAAK,EAAE;AACHC,MAAAA,IAAI,EAAG,GAAEzB,WAAY;AADlB,KAJK;AAOZ0B,IAAAA,QAAQ,EAAE;AACND,MAAAA,IAAI,EAAEE,QAAQ,CAACC,YAAT,KAA0BC,SAA1B,GACF,4CADE,GAC6C;AAF7C,KAPE;AAWZC,IAAAA,KAAK,EAAE;AACHC,MAAAA,IAAI,EAAE;AADH,KAXK;AAcZC,IAAAA,KAAK,EAAE;AACHR,MAAAA,KAAK,EAAE;AACHC,QAAAA,IAAI,EAAE;AADH;AADJ,KAdK;AAmBZQ,IAAAA,MAAM,EAAE;AACJC,MAAAA,OAAO,EAAE;AADL,KAnBI;AAsBZC,IAAAA,WAAW,EAAE;AACTC,MAAAA,IAAI,EAAE;AACFC,QAAAA,SAAS,EAAE;AACPC,UAAAA,cAAc,EAAE;AACZC,YAAAA,EAAE,EAAE,CADQ;AAEZC,YAAAA,EAAE,EAAE,CAFQ;AAGZC,YAAAA,EAAE,EAAE,CAHQ;AAIZC,YAAAA,EAAE,EAAE;AAJQ,WADT;AAOPC,UAAAA,KAAK,EAAE,CACH,CAAC,CAAD,EAAIpD,UAAU,CAACqD,UAAX,GAAwBC,MAAxB,CAA+B,CAA/B,CAAJ,CADG,EAEH,CAAC,CAAD,EAAItD,UAAU,CAACuD,KAAX,CAAiBvD,UAAU,CAACqD,UAAX,GAAwBC,MAAxB,CAA+B,CAA/B,CAAjB,EAAoDE,UAApD,CAA+D,CAA/D,EAAkEzC,GAAlE,CAAsE,MAAtE,CAAJ,CAFG;AAPA,SADT;AAaF0C,QAAAA,MAAM,EAAE;AACJC,UAAAA,MAAM,EAAE;AADJ,SAbN;AAgBFC,QAAAA,SAAS,EAAE,CAhBT;AAiBFC,QAAAA,MAAM,EAAE;AACJC,UAAAA,KAAK,EAAE;AACHF,YAAAA,SAAS,EAAE;AADR;AADH,SAjBN;AAsBFG,QAAAA,SAAS,EAAE;AAtBT;AADG,KAtBD;AAiDZC,IAAAA,MAAM,EAAE,CAAC;AACLvB,MAAAA,IAAI,EAAE,MADD;AAELwB,MAAAA,IAAI,EAAE,aAFD;AAGL3D,MAAAA,IAAI,EAAEiB;AAHD,KAAD;AAjDI,GAAhB;;AAwDA,QAAM2C,cAAc,GAAG,MAAM;AACzBlE,IAAAA,KAAK,CAACgB,GAAN,CAAW,8CAA6CN,WAAY,EAApE,EACKO,IADL,CACWC,QAAD,IAAc;AAChBT,MAAAA,YAAY,CAACS,QAAQ,CAACZ,IAAV,CAAZ;AACAe,MAAAA,OAAO,CAACC,GAAR,CAAYd,SAAS,CAAC2D,MAAtB;AACH,KAJL;AAKH,GAND;;AAUA,sBACI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA,4BACI;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA,8BACI,QAAC,QAAD;AAAU,QAAA,SAAS,EAAC,UAApB;AAA+B,QAAA,QAAQ,EAAGC,CAAD,IAAO;AAC5CzD,UAAAA,cAAc,CAACyD,CAAC,CAACC,KAAH,CAAd;AACH,SAFD;AAEG,QAAA,OAAO,EAAE/D,IAAI,CAACkB,GAAL,CAASC,EAAE,IAAIA,EAAE,CAAC6C,QAAlB,CAFZ;AAGU,QAAA,WAAW,EAAC;AAHtB;AAAA;AAAA;AAAA;AAAA,cADJ,eAKI,QAAC,MAAD;AAAQ,QAAA,SAAS,EAAC,eAAlB;AAAkC,QAAA,OAAO,EAAEJ,cAA3C;AAA2D,QAAA,OAAO,EAAC,SAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cALJ,EAKoG,GALpG;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YARJ,eASI;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA,6BACI;AAAO,QAAA,KAAK,EAAC,MAAb;AAAoB,QAAA,WAAW,EAAC,GAAhC;AAAA,gCACI;AAAA,kCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAMI;AAAA,kCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBANJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YATJ,eAuBI;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA,8BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,EAEKtD,QAAQ,KAAK,KAAb,gBAEG,QAAC,MAAD;AAAQ,QAAA,IAAI,EAAC,UAAb;AAAwB,QAAA,KAAK,EAAC,SAA9B;AAAwC,QAAA,MAAM,EAAE,EAAhD;AAAoD,QAAA,KAAK,EAAE;AAA3D;AAAA;AAAA;AAAA;AAAA,cAFH,gBAIG,QAAC,eAAD;AACI,QAAA,UAAU,EAAEX,UADhB;AAEI,QAAA,OAAO,EAAE8B;AAFb;AAAA;AAAA;AAAA;AAAA,cANR;AAAA;AAAA;AAAA;AAAA;AAAA,YAvBJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AA2CH,CAlJD;;GAAM1B,Q;UASED,Y;;;KATFC,Q;AAoJN,eAAeA,QAAf","sourcesContent":["import './CoinData.css'\nimport Dropdown from 'react-dropdown';\nimport 'react-dropdown/style.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {Button} from 'react-bootstrap';\nimport {useEffect, useState} from \"react\";\nimport axios from \"axios\";\nimport Highcharts from 'highcharts'\nimport HighchartsReact from 'highcharts-react-official'\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Loader from \"react-loader-spinner\";\nimport useWebSocket from 'react-use-websocket';\n\nconst CoinData = () => {\n    const [data, setData] = useState([]);\n    const [histPrice, setHistPrice] = useState([])\n    const [currentCoin, setCurrentCoin] = useState()\n    const [isLoaded, setIsLoaded] = useState(false);\n\n    const {\n        sendMessage,\n        lastMessage,\n    } = useWebSocket('ws://ws.coinapi.io/v1/');\n\n\n    useEffect(() => {\n        axios.get('http://localhost:3008/getAssetId')\n            .then((response) => {\n                setData(response.data)\n            })\n        sendMessage(JSON.stringify({\n            \"type\": \"hello\",\n            \"apikey\": \"66A15D21-5AB9-41C5-ABA2-43E246120E31\",\n            \"heartbeat\": true,\n            \"subscribe_data_type\": [\"trade\"],\n            \"subscribe_filter_symbol_id\": [\n                \"BITSTAMP_SPOT_BTC_USD$\",\n                \"BITFINEX_SPOT_BTCLTC$\",\n                \"COINBASE\",\n                \"ITBIT_\"\n            ]\n        }))\n    }, [])\n\n    useEffect(() => {\n                console.log(lastMessage)\n    }, [lastMessage])\n\n    let filteredHistData = histPrice.map((el) => [+new Date(el.time_open), Math.round(el.rate_open)]);\n\n    const options = {\n        chart: {\n            zoomType: 'x'\n        },\n        title: {\n            text: `${currentCoin} to USD exchange rate over time`\n        },\n        subtitle: {\n            text: document.ontouchstart === undefined ?\n                'Click and drag in the plot area to zoom in' : 'Pinch the chart to zoom in'\n        },\n        xAxis: {\n            type: 'datetime'\n        },\n        yAxis: {\n            title: {\n                text: 'Price (USD)'\n            }\n        },\n        legend: {\n            enabled: false\n        },\n        plotOptions: {\n            area: {\n                fillColor: {\n                    linearGradient: {\n                        x1: 0,\n                        y1: 0,\n                        x2: 0,\n                        y2: 1\n                    },\n                    stops: [\n                        [0, Highcharts.getOptions().colors[0]],\n                        [1, Highcharts.color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]\n                    ]\n                },\n                marker: {\n                    radius: 2\n                },\n                lineWidth: 1,\n                states: {\n                    hover: {\n                        lineWidth: 1\n                    }\n                },\n                threshold: null\n            }\n        },\n\n        series: [{\n            type: 'area',\n            name: 'Price (USD)',\n            data: filteredHistData\n        }]\n    };\n\n    const onSubscribeBtn = () => {\n        axios.get(`http://localhost:3008/historicalPrice?coin=${currentCoin}`)\n            .then((response) => {\n                setHistPrice(response.data)\n                console.log(histPrice.length)\n            })\n    }\n\n\n\n    return (\n        <div className=\"main-container\">\n            <div className=\"select-coin\">\n                <Dropdown className=\"dropdown\" onChange={(e) => {\n                    setCurrentCoin(e.value)\n                }} options={data.map(el => el.asset_id)}\n                          placeholder=\"Select an option\"/>\n                <Button className=\"subscribe-btn\" onClick={onSubscribeBtn} variant=\"primary\">Subscribe</Button>{' '}\n            </div>\n            <p>Market data</p>\n            <div className=\"market-data\">\n                <table width=\"100%\" cellPadding=\"5\">\n                    <tr>\n                        <th>Symbol:</th>\n                        <th>Price:</th>\n                        <th>Time:</th>\n                    </tr>\n                    <tr>\n                        <td>BTC/USD</td>\n                        <td>$48.384,433</td>\n                        <td>Aug 7, 9:45 AM</td>\n                    </tr>\n                </table>\n            </div>\n            <div className=\"charting-data\">\n                <p>Charting data</p>\n                {isLoaded === false\n                    ?\n                    <Loader type=\"TailSpin\" color=\"#0080ff\" height={80} width={80}/>\n                    :\n                    <HighchartsReact\n                        highcharts={Highcharts}\n                        options={options}\n                    />\n\n\n                }\n\n\n\n            </div>\n        </div>\n    )\n}\n\nexport default CoinData;"]},"metadata":{},"sourceType":"module"}